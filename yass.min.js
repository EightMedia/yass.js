/*! Yass.js - v0.0.2 - 2013-06-20
 * https://github.com/eightmedia/yass.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
var YASS=function(t,i){function e(t){var i=this;this.image=t,this.candidates=null,this.has_srcset=t.getAttribute(c),t.setAttribute(r,!0),this.collectCandidates(),this.update(),s(t,"load",function(){i.show()}),setTimeout(function(){i.show()},500)}function s(t,i,e){return t.addEventListener?t.addEventListener(i,e,!1):t.attachEvent("on"+i,e)}function n(){a();for(var t=0,i=o.length;i>t;t++)o[t].update()}function h(){for(var t=i.images,s=0,n=t.length;n>s;s++)t[s].getAttribute(r)||o.push(new e(t[s]))}function a(){d={width:t.innerWidth||i.documentElement.clientWidth||t.screen.width,height:t.innerHeight||i.documentElement.clientHeight||t.screen.height,density:t.devicePixelRatio||1}}var r="data-yass",c="srcset",o=[],d={};e.prototype={collectCandidates:function(){if(!this.candidates&&this.has_srcset){this.candidates=[];for(var t=this.image.getAttribute(c),i=t.split(/\s*,\s*/g),e=0;i.length>e;e++){for(var s=i[e].split(" "),n={src:s.shift(),w:0,h:0,x:1},h=0;s.length>h;h++)n[s[h].slice(-1)]=parseFloat(s[h]);this.candidates.push(n)}this.image.src&&this.candidates.push({src:this.image.src,w:0,h:0,x:1}),this.candidates.sort(function(t,i){return t.x>i.x?-1:t.x<i.x?1:t.w>i.w?-1:t.w<i.w?1:t.h>i.h?-1:t.h<i.h?1:1})}},getSrc:function(){var t,i;for(i=0;this.candidates.length>i;i++)if(t=this.candidates[i],t.x<=d.density&&(0===t.w||t.w<d.width)&&(0===t.h||t.h<d.height))return t.src;return t.src},show:function(){this.image.style.visibility="visible"},update:function(){this.image.parentNode&&this.has_srcset&&(this.image.src=this.getSrc(),this.show())}},a(),h();var u;return s(t,"resize",function(){clearTimeout(u),u=setTimeout(n,100)}),s(t,"orientationchange",n),function(){h(),n()}}(window,document);