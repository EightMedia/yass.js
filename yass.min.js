/*! Yass.js - v0.0.2 - 2013-06-20
 * https://github.com/eightmedia/yass.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
var YASS=function(t,e){function i(t){var e=this;this.image=t,this.id=s(),this.srcset=null,this.has_srcset=t.getAttribute(a),t.setAttribute(o,this.id),this.collectSrcSet(),this.update(),n(t,"load",function(){e.show()}),setTimeout(function(){e.show()},500)}function s(){return g++}function n(t,e,i){return t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}function r(){c();for(var t=0,e=u.length;e>t;t++)u[t].update()}function h(){for(var t=e.images,s=0,n=t.length;n>s;s++)t[s].getAttribute(o)||u.push(new i(t[s]))}function c(){f={width:t.innerWidth||e.documentElement.clientWidth||t.screen.width,height:t.innerHeight||e.documentElement.clientHeight||t.screen.height,pxratio:t.devicePixelRatio||1}}var o="data-yass",a="srcset",u=[],f={};if(a in new Image)return function(){};i.prototype={collectSrcSet:function(){if(!this.srcset&&this.has_srcset){this.srcset=[];for(var t=this.image.getAttribute(a),e=t.split(/\s*,\s*/g),i=0;e.length>i;i++){for(var s=e[i].split(" "),n={src:s.shift(),w:0,h:0,x:1},r=0;s.length>r;r++)n[s[r].slice(-1)]=parseFloat(s[r]);this.srcset.push(n)}this.image.src&&this.srcset.push({src:this.image.src,w:0,h:0,x:1}),this.srcset.sort(function(t,e){return t.x>e.x?-1:t.x<e.x?1:t.w>e.w?-1:t.w<e.w?1:t.h>e.h?-1:t.h<e.h?1:1})}},getSrc:function(){var t,e;for(e=0;this.srcset.length>e;e++)if(t=this.srcset[e],t.x<=f.pxratio&&(0===t.w||t.w<f.width)&&(0===t.h||t.h<f.height))return t.src;return t.src},show:function(){this.image.style.visibility="visible"},update:function(){this.image.parentNode&&this.has_srcset&&(this.image.src=this.getSrc(),this.show())}};var g=0;c(),h();var l;return n(t,"resize",function(){clearTimeout(l),l=setTimeout(r,100)}),n(t,"orientationchange",r),function(){h(),r()}}(window,document);