/*! Yass.js - v0.0.5 - 2013-09-05
 * http://eightmedia.github.io/yass.js/
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
var YASS=function(a,b){function c(a){var b=this;this.image=a,this.candidates=null,this.has_srcset=a.getAttribute(j),a.setAttribute(h,!0),this.collectCandidates(),this.update(),d(a,"load",function(){b.show()}),setTimeout(function(){b.show()},500)}function d(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function e(){g();for(var a=0,b=m.length;b>a;a++)m[a].update()}function f(){for(var a=b.images,d=0,e=a.length;e>d;d++)a[d].getAttribute(j)&&m.push(new c(a[d]))}function g(){n={width:a.innerWidth||k.clientWidth||l.width,height:a.innerHeight||k.clientHeight||l.height,density:a.devicePixelRatio||1}}var h="data-yass",i="yass-ready",j="srcset",k=b.documentElement,l=a.screen,m=[],n={};c.prototype={collectCandidates:function(){if(!this.candidates&&this.has_srcset){this.candidates=[];for(var a=this.image.getAttribute(j),b=a.split(/\s*,\s*/g),c=0;c<b.length;c++){for(var d=b[c].split(" "),e={src:d.shift(),w:0,h:0,x:1},f=0;f<d.length;f++)e[d[f].slice(-1)]=parseFloat(d[f]);this.candidates.push(e)}this.image.src&&this.candidates.push({src:this.image.src,w:0,h:0,x:1}),this.candidates.sort(function(a,b){return a.x>b.x?-1:a.x<b.x?1:a.w>b.w?-1:a.w<b.w?1:a.h>b.h?-1:a.h<b.h?1:1})}},getSrc:function(){var a,b;for(b=0;b<this.candidates.length;b++)if(a=this.candidates[b],a.x<=n.density&&(0===a.w||a.w<n.width)&&(0===a.h||a.h<n.height))return a.src;return a.src},show:function(){-1===this.image.className.indexOf(i)&&(this.image.className+=" "+i),this.image.naturalWidth&&(this.image.width=this.image.naturalWidth,this.image.height=this.image.naturalHeight)},update:function(){if(this.image.parentNode&&this.has_srcset){var a=this.getSrc();this.image.src!=a&&(this.image.src=a),this.show()}}},g(),f();var o;return d(a,"resize",function(){clearTimeout(o),o=setTimeout(e,100)}),d(a,"orientationchange",e),function(){f(),e()}}(window,document);