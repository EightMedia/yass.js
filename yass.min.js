/*! Yass.js - v0.0.2 - 2013-06-21
 * http://eightmedia.github.io/yass.js/
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
var YASS=function(a,b){function c(a){var b=this;this.image=a,this.candidates=null,this.has_srcset=a.getAttribute(i),a.setAttribute(h,!0),this.collectCandidates(),this.update(),d(a,"load",function(){b.show()}),setTimeout(function(){b.show()},500)}function d(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function e(){g();for(var a=0,b=l.length;b>a;a++)l[a].update()}function f(){for(var a=b.images,d=0,e=a.length;e>d;d++)a[d].getAttribute(h)||l.push(new c(a[d]))}function g(){m={width:a.innerWidth||j.clientWidth||k.width,height:a.innerHeight||j.clientHeight||k.height,density:a.devicePixelRatio||1}}var h="data-yass",i="srcset",j=b.documentElement,k=a.screen,l=[],m={};c.prototype={collectCandidates:function(){if(!this.candidates&&this.has_srcset){this.candidates=[];for(var a=this.image.getAttribute(i),b=a.split(/\s*,\s*/g),c=0;c<b.length;c++){for(var d=b[c].split(" "),e={src:d.shift(),w:0,h:0,x:1},f=0;f<d.length;f++)e[d[f].slice(-1)]=parseFloat(d[f]);this.candidates.push(e)}this.image.src&&this.candidates.push({src:this.image.src,w:0,h:0,x:1}),this.candidates.sort(function(a,b){return a.x>b.x?-1:a.x<b.x?1:a.w>b.w?-1:a.w<b.w?1:a.h>b.h?-1:a.h<b.h?1:1})}},getSrc:function(){var a,b;for(b=0;b<this.candidates.length;b++)if(a=this.candidates[b],a.x<=m.density&&(0===a.w||a.w<m.width)&&(0===a.h||a.h<m.height))return a.src;return a.src},show:function(){this.image.style.visibility="visible"},update:function(){this.image.parentNode&&this.has_srcset&&(this.image.src=this.getSrc(),this.show())}},g(),f();var n;return d(a,"resize",function(){clearTimeout(n),n=setTimeout(e,100)}),d(a,"orientationchange",e),function(){f(),e()}}(window,document);